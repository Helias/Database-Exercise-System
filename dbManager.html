<html ng-app="exerciseSystem">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="DataBase Exercise System">
        <meta name="author" content="Helias, Tkd-Alex">

        <title>DataBase Exercise System</title>

        <!-- JavaScript -->
        <script src="lib/js/angular.min.js"></script>
        <script src="lib/js/angular-ui-router.min.js"></script>
        <script src="lib/js/ui-bootstrap.min.js"></script>
        <script src="lib/js/loading-bar.min.js"></script>

        <script src="js/appAdmin.js"></script>

        <!-- CSS -->
        <link rel="stylesheet" href="lib/css/bootstrap.min.css">
        <link rel="stylesheet" href="lib/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="lib/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="lib/css/font-awesome.css">
        <link rel="stylesheet" href="lib/css/font-awesome.min.css">

        <!--[if IE]>
        <script src="https://cdn.jsdelivr.net/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://cdn.jsdelivr.net/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body ng-controller="dbManager">
        <div class="container"> 
            <br>

            <form>

                <label for="text_nameDatabase">Inserisci il nome del database:</label>
                <input type="text" id="text_nameDatabase" class="form-control input-xsmall" ng-model="nameDatabase">

                <hr>    

                <label for="text_nTables">Inserisci il numero di tabelle:</label>
                <input type="number" id="text_nTables" class="form-control input-xsmall" ng-model="nTables" min="1" max="5" >

                <br>

                <div ng-repeat="i in getNumber(nTables) track by $index" ng-init="indexTable = $index"> 
                    <hr>
                    <h2>Tabella numero {{indexTable+1}}</h2>

                    <label for="text_nameTable{{indexTable}}">Inserisci il nome della tabella:</label>
                    <input type="text" id="text_nameTable{{indexTable}}" class="form-control input-xsmall" ng-model="tables[indexTable].name">

                    <br>

                    <label for="text_nColumns">Inserisci il numero di attributi (colonne):</label>
                    <input type="number" id="text_nColumns" class="form-control input-xsmall" ng-model="tables[indexTable].columns" min="1" max="5" value="1">

                    <br>

                    <div class="input-group"  ng-repeat="i in getNumber(tables[indexTable].columns) track by $index" ng-init="indexColum = $index">
                        <span class="input-group-addon" id="desc_attr{{indexColum}}">Attributo Numero: {{indexColum+1}}</span>
                        <input type="text" class="form-control" aria-describedby="desc_attr{{indexColum}}" ng-model="tables[indexTable].attr[indexColum]">
                    </div>

                    <br>

                    <label for="text_nRows">Inserisci il numero di valori (righe):</label>
                    <input type="number" id="text_nRows" class="form-control input-xsmall" ng-model="tables[indexTable].rows" min="1" max="5" value="1">

                    <br>

                    <table class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th ng-repeat="i in getNumber(tables[indexTable].columns) track by $index" ng-init="indexColum = $index">{{tables[indexTable].attr[indexColum]}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="i in getNumber(tables[indexTable].rows) track by $index" ng-init="indexRow = $index">
                                <th scope="row">{{indexRow+1}}</th>
                                <td ng-repeat="i in getNumber(tables[indexTable].columns) track by $index" ng-init="indexColum = $index"> 
                                    <div class="input-group" >
                                        <input type="text" id="row{{indexRow}}_col{{indexColum}}" class="form-control" ng-model="tables[indexTable].matrix[indexRow][indexColum]"> 
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open('small')">FK</button>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </div>

                <br>

                <div class="row text-center">
                    <button class="btn btn-success btn-lg" ng-click="logTable()">Aggiungi un nuovo database</button>
                </div>
            </form>

        </div>
    </body>
</html>
